# 共創カフェ シフト管理システム - 完全セットアップガイド

このガイドに従うと、誰でもアクセスできるシフト管理システムが完成します。

---

## 所要時間: 約15分

## 必要なもの
- Googleアカウント
- GitHubアカウント（無料）

---

## ステップ 1: Google スプレッドシートを作成（5分）

### 1-1. スプレッドシートを新規作成
1. [Google スプレッドシート](https://sheets.google.com) を開く
2. 「＋ 空白」をクリックして新規作成
3. ファイル名を「共創カフェ シフト管理」に変更

### 1-2. Apps Script を設定
1. メニューの「拡張機能」→「Apps Script」をクリック
2. 新しいタブでスクリプトエディタが開く
3. 左側の「コード.gs」をクリック
4. 既存のコードを全て削除

### 1-3. コードをコピー
1. `cafe-unified-system/gas/Code.gs` ファイルを開く
2. 全てのコードをコピー（Ctrl+A → Ctrl+C）
3. Apps Scriptエディタに貼り付け（Ctrl+V）
4. 「Ctrl + S」で保存

### 1-4. 初期化を実行
1. 上部のドロップダウンで「initializeSheets」を選択
2. 「実行」ボタンをクリック
3. 「権限を確認」→ 自分のアカウント → 「詳細」→「移動」→「許可」
4. スプレッドシートに「シフト提出」「打刻履歴」シートが作成される

### 1-5. ウェブアプリとしてデプロイ
1. 右上の「デプロイ」→「新しいデプロイ」
2. 歯車アイコン →「ウェブアプリ」を選択
3. 設定:
   - 説明: 「共創カフェAPI」
   - 次のユーザーとして実行: 「自分」
   - アクセスできるユーザー: **「全員」**
4. 「デプロイ」をクリック
5. 表示された **ウェブアプリURL** をコピー（メモ帳などに保存）

---

## ステップ 2: システムにURLを設定（2分）

### 2-1. config.js を編集
`cafe-unified-system/js/config.js` を開いて編集:

```javascript
// 12-15行目を以下のように変更
GAS_URL: {
    production: 'ここにコピーしたURLを貼り付け',
    development: 'ここにコピーしたURLを貼り付け'
},
```

例:
```javascript
GAS_URL: {
    production: 'https://script.google.com/macros/s/AKfycbx.../exec',
    development: 'https://script.google.com/macros/s/AKfycbx.../exec'
},
```

---

## ステップ 3: GitHub Pages で公開（8分）

### 3-1. GitHubアカウントを作成（既にある場合はスキップ）
1. [github.com](https://github.com) にアクセス
2. 「Sign up」でアカウント作成

### 3-2. リポジトリを作成
1. GitHubにログイン
2. 右上の「＋」→「New repository」
3. 設定:
   - Repository name: `cafe-shift-system`
   - Public を選択
   - 他はそのまま
4. 「Create repository」をクリック

### 3-3. ファイルをアップロード
1. 作成されたページで「uploading an existing file」をクリック
2. `cafe-unified-system` フォルダを開く
3. 以下のファイル・フォルダをドラッグ＆ドロップ:

```
index.html
clock.html
calendar.html
admin.html
css/ (フォルダごと)
js/  (フォルダごと)
```

4. 「Commit changes」をクリック

### 3-4. GitHub Pages を有効化
1. リポジトリページで「Settings」タブをクリック
2. 左メニューの「Pages」をクリック
3. 「Source」を設定:
   - Branch: `main`
   - Folder: `/ (root)`
4. 「Save」をクリック
5. 1-2分待つと上部に緑色でURLが表示される

---

## 完成！

あなたのシステムURL:
```
https://あなたのユーザー名.github.io/cafe-shift-system/
```

このURLを共有すれば、誰でもシフトを提出できます！

---

## 機能一覧

| 機能 | 説明 |
|-----|------|
| シフト提出 | 週1回・90分のシフトを選択して提出 |
| シフトキャンセル | 提出済みシフトをキャンセル可能 |
| 打刻 | 出勤・退勤を記録（遅刻・早退も自動判定） |
| カレンダー | シフト状況をカレンダー形式で確認 |
| 管理画面 | 全員のシフト・打刻を一括管理 |

---

## トラブルシューティング

### Q: スプレッドシートにデータが保存されない
A: config.js のGAS_URLが正しく設定されているか確認してください。

### Q: 「このアプリは確認されていません」と表示される
A: 「詳細」→「（安全ではないページ）に移動」で進めます。自分のスクリプトなので問題ありません。

### Q: GitHub Pagesが表示されない
A: 設定後1-2分待ってからリロードしてください。

### Q: 同じ週にシフトが登録できない
A: 週1制約があるため、既存のシフトをキャンセルしてから再登録してください。

---

## データの確認

### スプレッドシートで確認
- 「シフト提出」シート: 全員のシフト申請
- 「打刻履歴」シート: 全員の出退勤記録

### 管理画面で確認
- `admin.html` にアクセス
- パスワード: `admin123`

---

## お問い合わせ

問題があれば、以下を確認してください:
1. ブラウザのコンソール（F12 → Console）にエラーがないか
2. スプレッドシートの権限設定が「全員」になっているか
3. GitHub Pagesが「main」ブランチを参照しているか
